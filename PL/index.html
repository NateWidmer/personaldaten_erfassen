<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Beispiel 5-Tier Architektur -->
<!-- Author: Nate Widmer, Larissa Bosshard -->

<head>
  <title></title>
  <meta name="author" content="M151">
  <meta name="editor" content="html-editor phase 5">
  <link rel="stylesheet" href="style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script language="javascript" type="text/javascript">
    $(document).ready(function () {
      $.get("../BL/getUserList.php", function (data) {
        $("#personal_list").html(data);
      });
      $.get("../BL/select.php", function (data) {
        $("#abteilungSelect").html(data);
      })
    });

    $(function () {

      $('#personal_form').on('submit', function (e) {

        e.preventDefault();

        $.ajax({
          type: 'post',
          url: '../BL/post.php',
          data: $('#personal_form').serialize(),
          success: function () {
            location.reload();
          }
        });

      });

    });

    function deleteUser(deleteId) {
      $.post('../BL/delete.php', {
        delete_id: deleteId,
        function() {
          location.reload();
        }
      });
    }

    function updateUser(id) {
      $('#form').load('../BL/getSingleUser.php', {
        id: id
      }, function () {
        $.get("../BL/select.php", function (data) {
          $("#abteilungSelect").html(data);
        })
      });
    }

    function updateUserData(userId) {
      $('#personal_form_update').on('submit', function (e) {

        e.preventDefault();

        $.ajax({
          type: 'post',
          url: '../BL/update.php',
          data: $('#personal_form_update').serialize() + "&id=" + userId,
          success: function () {
            location.reload();
          }
        });

      });
    }
  </script>

</head>

<body text="#000000" bgcolor="#FFFFFF" link="#FF0000" alink="#FF0000" vlink="#FF0000">

  <div class="container">
    <div class="row">
      <div class="five columns">
        <h1>M151 5-Tier Architektur</h1>
      </div>
    </div>
    <div id="form">
      <form id="personal_form" METHOD="POST">
        <div class="row">
          <div class="four columns">
            <label>Nachname</label> <br><input type="text" name="nachname"></input><br><br>
            <label>Vorname</label> <br><input type="text" name="vorname"></input><br><br>
            <label>Geb. Datum</label> <br><input type="date" id="start" name="geburtstag" value="2000-07-22"
              min="1900-01-01" max="2020-08-25"><br><br>
            <label>Email</label> <br><input type="email" name="email"></input><br><br>
            <label>AHV Nr.</label> <br><input type="text" name="ahv_nr"></input><br><br>
            <label>Personal Nr.</label> <br><input type="number" name="personal_nr"></input><br><br>
            <label>Telefon</label> <br><input type="text" name="telefon"></input><br><br>
          </div>
          <div class="four columns">
            <label>Abteilung</label><br>
            <select id="abteilungSelect" name="abteilungen">
            </select>
            <br><br>
            <INPUT TYPE=SUBMIT NAME="register_user" class="button" VALUE="Erfassen" ID="register_user">
          </div>
        </div>
      </form>
    </div>
    <div class="row">
      <div class="twelve columns" id="personal_list">
      </div>
    </div>
  </div>
</body>

</html>
<html>

<head>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
  <meta name="Robots" content="NOINDEX " />
</head>

<body></body>
<script type="text/javascript">
  var gearPage = document.getElementById('GearPage');
  if (null != gearPage) {
    gearPage.parentNode.removeChild(gearPage);
    document.title = "Error";
  }
</script>

</html>